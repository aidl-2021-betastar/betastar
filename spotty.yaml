project:
  name: betastar
  syncFilters:
    - exclude:
      - .git/*
      - .venv/*
      - __pycache__/
      - __pycache__/*
      - tests/__pycache__/
      - .pytest_cache/
      - wandb/*
      - '*.pth'

containers:
  - projectDir: /workspace/project
    file: Dockerfile
    volumeMounts:
      - name: large-workspace
        mountPath: /workspace
    workingDir: /workspace/project


instances:
  - name: i1
    provider: aws
    parameters:
      region: eu-west-3
      instanceType: g4dn.xlarge
      spotInstance: true
      dockerDataRoot: /docker
      volumes:
        - name: large-workspace
          parameters:
            size: 300
            deletionPolicy: Retain
        - name: large-docker
          parameters:
            size: 30
            mountDir: /docker
            deletionPolicy: Retain

scripts:
  train: |
    /usr/bin/xvfb-run -a python -m betastar run --agent a2c --environment SC2MoveToBeacon-v0 --num-workers 8 --learning-rate 2.5e-3 --episodes 8 --use-ppo --clip-range 0.25 --batch-size 32 --unroll-length 60 --reward-decay 0.99 --gae-lambda 0.95 --entropy-coeff 0.01 --critic-coeff 0.5 --update-epochs 4 --total-steps 10000000
